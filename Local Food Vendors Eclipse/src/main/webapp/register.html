<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popup Login Form</title>
    <link rel="stylesheet" href="registerstyles.css">
    <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-app.js"></script>
   <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-database.js"></script>

</head>
<body>

 <div class="main-container">
   <input type="checkbox" id="slide">
   
   <div class="container">
     <div class="login-container">

         <div class="text">
            Login 
         </div>
   
         <form id="loginForm">
            <div class="data">
               <label for="">Email or Phone</label>
               <input type="text" id="loginEmail" required>
            </div>
            <div class="data">
               <label for="">Password</label>
               <input type="password" id="loginPassword" required>
            </div>
   
            <div class="forgot-pass">
               <a href="#">Forgot Password?</a>
            </div>
   
            <div class="btn-login">
               <button type="submit">login</button>
            </div>
            <script src="https://accounts.google.com/gsi/client" async defer></script>
         </head>
         <body>
           <!-- Add a button for "Sign in with Google" -->
           <div id="g_id_onload"
                data-client_id="67460e74-02e3-11e8-b443-00163e990bdb"
                data-callback="handleCredentialResponse">
           </div>
           <div class="g_id_signin"></div>
         
           <!-- JavaScript code for handling the response -->
           <script>
             function handleCredentialResponse(response) {
               console.log(response);
               // Redirect to the Google Account page
               window.location.href = "https://myaccount.google.com/";
             }
           </script>
         </form>
   
            <div class="register-link">
               Don't have an account? <a href="#"><label for="slide" class="slide">Register now!</label></a>
            </div>
         </form>
         
      </div>
     

      <div class="register-container">
         <div class="text">Sign up</div>
   <!--added a separate div for each input type-->
         <form id="signupForm">
            <div class="data">
               <label for="">Email or Phone</label>
               <input type="email" id="signupEmail" required>
            </div>
            <div class="data">
               <label for="">Password</label>
               <input type="password" id="signupPassword" required>
            </div>
   
            <div class="data">
               <label for="">Confirm Password</label>
               <input type="password" id="confirmPassword"required>
            </div>
   
            <div class="btn-register">
               <button type="submit">Sign Up</button>
            </div>
   
            <div class="register-link">
               Already have an account ? <a href="#"><label for="slide" class="slide">Sign in!</label></a>
            </div>  
         </form>

      </div>
 </div>

 <script>
   // Your web app's Firebase configuration
   var firebaseConfig = {
       apiKey: "AIzaSyA7YX4hf4AkdGcOLGAeAO90zZVbQORm4lQ",
    authDomain: "local-vendors-application.firebaseapp.com",
    projectId: "local-vendors-application",
    storageBucket: "local-vendors-application.appspot.com",
    messagingSenderId: "1045242204104",
    appId: "1:1045242204104:web:fc55fe8dc8bdf110653afd",
    measurementId: "G-QRXZEKRCJE"
   };

   // Initialize Firebase
   firebase.initializeApp(firebaseConfig);

   // Get a reference to the database
   var database = firebase.database();

   // Submit form event listener
   document.getElementById("signupForm").addEventListener("submit", function(event) {
     event.preventDefault();

     // Get values from the form
     var email = document.getElementById("signupEmail").value;
     var password = document.getElementById("signupPassword").value;
     var confirmPassword = document.getElementById("confirmPassword").value;

      //Check if passwords match
      if (password !== confirmPassword) {
        alert("Passwords do not match!!");
        return;
      }


     // Store the data in the database
     var userData = {
       email: email,
       password: password
     };

     // Push the data to the database under a unique key
     database.ref("users").push(userData, function(error) {
       if (error) {
         console.log("Data could not be saved." + error);
       } else {
         console.log("Data saved successfully.");
         // Clear the form fields
         document.getElementById("email").value = "";
         document.getElementById("password").value = "";
         document.getElementById("confirmPassword").value = "";
       }
     });
   });
   

// Submit form event listener for loginForm
document.getElementById("loginForm").addEventListener("submit", function(event) {
      event.preventDefault();

      // Get values from the form
      var email = document.getElementById("loginEmail").value;
      var password = document.getElementById("loginPassword").value;

      // Check if email and password exist in Firebase
      database.ref("users").orderByChild("email").equalTo(email).once("value", function(snapshot) {
         if (snapshot.exists()) {
            snapshot.forEach(function(childSnapshot) {
               var user = childSnapshot.val();
               if (user.password === password) {
                  alert("Login successful!");
                  // Perform additional actions for successful login
               } else {
                  alert("Incorrect password. Please try again.");
               }
            });
         } else {
            alert("Email not found. Please sign up first.");
         }
      });
   });
  



 </script>



   
</body>
</html>


